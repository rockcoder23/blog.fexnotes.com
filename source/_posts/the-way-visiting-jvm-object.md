---
title: JVM 中对象的访问方式
date: 2013/8/20 12:57:30
categories:
- Shit Done
tags:
- JVM 
---
在不同的的jvm中，实现对象的访问方式会有所不同，其中主流的访问方式有两种：使用句柄和直接指针。

**1. 句柄方式：**

jvm会在堆中划分一部分内存存放句柄，称为句柄池，reference引用存储着句柄的地址，而句柄中包含了对象实例数据的指针和对象类型数据指针（指向方法区中对象类型信息）

![句柄方式](http://farm3.staticflickr.com/2829/10456407563_092698dc8a.jpg)

使用句柄方式的优点是，reference中存放的是句柄的地址，堆中对象移动后，句柄地址变化，而reference中的内容不变。

<!--more-->

**2. 直接指针方式：**

在直接指针方式中，reference中直接存放着对象的地址，而对象中存放着对对象类型数据的指针。

![直接指针方式](http://farm3.staticflickr.com/2886/10456406993_c33cf7b1e6.jpg)

直接指针方式的优点是访问速度比句柄方式快，因为减少了一次指针的定位的开销。这在java中对象访问频繁的情况能节约很大的执行成本。Sun HotSpot 使用的是直接指针方式。
